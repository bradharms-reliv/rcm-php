/*! rcm-html-editor 2019-04-04 */

var rcmHtmlEditorGlobalConfig={language:"en",baseUrl:"/",fixed_toolbar_container:"#externalToolbarWrapper"},rcmHtmlEditorConfig={toolbar_container_prefix:"#htmlEditorToolbar-",htmlEditorOptions:{defaults:{link_list:"/rcm-page-search/title?format=tinyMceLinkList",relative_urls:!1,optionsName:"defaults",force_br_newlines:!1,force_p_newlines:!0,forced_root_block:"",paste_as_text:!0,inline:!0,encoding:"raw",fixed_toolbar_container:rcmHtmlEditorGlobalConfig.fixed_toolbar_container,language:rcmHtmlEditorGlobalConfig.language,menubar:!1,plugins:"anchor, charmap, code, hr, image, linkwithjqueryautocomplete, paste, table, textcolor, colorpicker, rcmFileChooser, lists",external_plugins:{linkwithjqueryautocomplete:"/vendor/rcm-tinymce/plugins/linkwithjqueryautocomplete/plugin.min.js",rcmFileChooser:"/vendor/rcm-s3-file-chooser/rcm-file-chooser-tiny-mce-plugin/plugin.js"},document_base_url:rcmHtmlEditorGlobalConfig.baseUrl,statusbar:!1,style_formats_merge:!0,style_formats:[{title:"Image",items:[{title:"Align Left",selector:"img",styles:{float:"left",margin:"0 1em .5em 0"}},{title:"Align Right",selector:"img",styles:{float:"right",margin:"0 0 .5em 1em"}}]}],image_advtab:!0,toolbar:["code | undo redo | styleselect | forecolor | bold italic underline strikethrough subscript superscript removeformat | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | cut copy pastetext | image table hr charmap | link unlink anchor | removeformat"]},text:{link_list:"/rcm-page-search/title?format=tinyMceLinkList",relative_urls:!1,optionsName:"text",force_br_newlines:!1,force_p_newlines:!0,forced_root_block:"",paste_as_text:!0,inline:!0,encoding:"raw",fixed_toolbar_container:rcmHtmlEditorGlobalConfig.fixed_toolbar_container,language:rcmHtmlEditorGlobalConfig.language,menubar:!1,plugins:"anchor, charmap, code, hr, image, linkwithjqueryautocomplete, paste, table, textcolor, colorpicker, rcmFileChooser",external_plugins:{linkwithjqueryautocomplete:"/vendor/rcm-tinymce/plugins/linkwithjqueryautocomplete/plugin.min.js",rcmFileChooser:"/vendor/rcm-s3-file-chooser/rcm-file-chooser-tiny-mce-plugin/plugin.js"},document_base_url:rcmHtmlEditorGlobalConfig.baseUrl,statusbar:!1,image_advtab:!0,toolbar:["code | undo redo | forecolor | bold italic underline strikethrough subscript superscript removeformat | outdent indent | cut copy pastetext | image charmap | link unlink anchor | removeformat"]},simpleText:{link_list:"/rcm-page-search/title?format=tinyMceLinkList",relative_urls:!1,optionsName:"simpleText",force_br_newlines:!1,force_p_newlines:!0,forced_root_block:"",paste_as_text:!0,inline:!0,encoding:"raw",fixed_toolbar_container:rcmHtmlEditorGlobalConfig.fixed_toolbar_container,language:rcmHtmlEditorGlobalConfig.language,menubar:!1,plugins:"anchor, charmap, code, hr, image, linkwithjqueryautocomplete, paste, table, rcmFileChooser",external_plugins:{linkwithjqueryautocomplete:"/vendor/rcm-tinymce/plugins/linkwithjqueryautocomplete/plugin.min.js",rcmFileChooser:"/vendor/rcm-s3-file-chooser/rcm-file-chooser-tiny-mce-plugin/plugin.js"},document_base_url:rcmHtmlEditorGlobalConfig.baseUrl,statusbar:!1,toolbar:["code | bold italic underline strikethrough subscript superscript removeformat | link unlink anchor | removeformat"]}}},RcmHtmlEditorOptions=function(rcmHtmlEditorConfig){var self=this;self.getHtmlOptions=function(type){return type&&rcmHtmlEditorConfig.htmlEditorOptions[type]?rcmHtmlEditorConfig.htmlEditorOptions[type]:rcmHtmlEditorConfig.htmlEditorOptions.defaults},self.buildHtmlOptions=function(id,scope,attrs,config){var options={},settings={};if("object"!=typeof config&&(config={}),attrs.htmlEditorOptions){try{var attrConfig=scope.$eval(attrs.htmlEditorOptions)}catch(e){}"object"==typeof attrConfig&&(config=angular.extend(attrConfig,config))}return options=angular.copy(self.getHtmlOptions(attrs.htmlEditorType)),settings=angular.extend(options,config),settings.mode="exact",settings.elements=id,settings.fixed_toolbar=!0,void 0!==attrs.htmlEditorAttachedToolbar&&(settings.inline=!0,settings.fixed_toolbar_container=rcmHtmlEditorConfig.toolbar_container_prefix+id,settings.fixed_toolbar=!1),attrs.htmlEditorBaseUrl&&(settings.baseUrl=attrs.htmlEditorBaseUrl),attrs.htmlEditorSize&&(settings.toolbar_items_size=attrs.htmlEditorSize),settings}},RcmHtmlEditor=function(id,rcmHtmlEditorService){var self=this;self.id=id,self.scope,self.elm,self.attrs,self.ngModel,self.settings={},self.tagName="",self.init=function(scope,elm,attrs,ngModel,settings){console.log("temp-console-log rcm-html-editor init",self.id),self.scope=scope,self.elm=elm,self.ngModel=ngModel,self.settings=settings,self.attrs=attrs,self.buildEditor(),self.buildRenderer(self.ngModel)},self.onInit=function(editor){console.log("temp-console-log rcm-html-editor onInit",self.id),rcmHtmlEditorService.eventManager.trigger("RcmHtmlEditor.onInit",{rcmHtmlEditor:self,editorInstance:editor})},self.onDestroy=function(){rcmHtmlEditorService.eventManager.trigger("RcmHtmlEditor.onDestroy",self)},self.onApply=function(){rcmHtmlEditorService.eventManager.trigger("RcmHtmlEditor.onApply",self)},self.getTagName=function(){return self.elm&&self.elm[0]&&!self.tagName&&(self.tagName=self.elm[0].tagName),self.tagName},self.getElmValue=function(){return self.getValue()},self.getValue=function(){return self.ngModel.$viewValue?self.ngModel.$viewValue:self.isFormControl()?self.elm.val():self.elm.html()},self.getEditorInstance=function(){return tinymce.get(self.id)},self.isFormControl=function(){return"TEXTAREA"==self.getTagName()},self.updateView=function(){if(self.ngModel&&"string"==typeof self.ngModel.$viewValue){var editorInstance=self.getEditorInstance(),content=editorInstance.getContent({format:"raw"});content!==self.getValue()&&(self.ngModel.$setViewValue(content),self.apply())}},self.apply=function(){self.scope.$root.$$phase?self.onApply():self.scope.$apply(function(){self.onApply()})},self.buildEditor=function(){self.settings.setup=function(editor){editor.on("init",function(args){self.ngModel&&(editor.setContent(self.getValue(),{format:"raw"}),self.ngModel.$render(),self.ngModel.$setPristine()),self.onInit(editor),self.apply()}),editor.on("postrender",function(args){}),editor.on("ExecCommand",function(e){editor.save(),self.updateView()}),editor.on("KeyUp",function(e){editor.save(),self.updateView()}),editor.on("SetContent",function(e){e.initial||e.selection||self.ngModel&&self.ngModel.$viewValue!==e.content&&(editor.save(),self.updateView())}),editor.on("blur",function(e){rcmHtmlEditorService.isEditing=!1,self.updateView()}),editor.on("focus",function(e){rcmHtmlEditorService.isEditing=!0,self.updateView()}),editor.on("ObjectResized",function(e){editor.save(),self.updateView()}),editor.on("change",function(e){self.updateView()})},self.elm.on("$destroy",function(){self.destroy("self.elm.on $destroy")}),self.scope.$on("$destroy",function(){}),setTimeout(function(){tinymce.init(self.settings)})},self.getNgModelRender=function(originalRender){return function(){setTimeout(function(){var editorInstance=self.getEditorInstance();if(editorInstance&&editorInstance.getBody()){var value=self.getValue();editorInstance.setContent(value,{format:"raw"})}originalRender()},0)}},self.buildRenderer=function(ngModel){if(ngModel){var originalRender=ngModel.$render;ngModel.$render=self.getNgModelRender(originalRender)}},self.destroy=function(msg){var editorInstance=self.getEditorInstance();editorInstance&&editorInstance.dom&&editorInstance.remove(),self.onDestroy(),self.apply()},self.hasEditorInstance=function(){return tinymce.get(self.id)}};RcmHtmlEditorToolbar=function(rcmHtmlEditorService){var self=this,loadSkin=function(skin,loadedCallback,errorCallback){var skinUrl=tinymce.baseURL+"/skins/"+skin,skinUiCss=skinUrl+"/skin.min.css";tinymce.DOM.styleSheetLoader.load(skinUiCss,loadedCallback,errorCallback)};self.template='<div class="htmlEditorToolbar" ng-cloak><div class="loading" ng-show="rcmHtmlEditorService.toolbarLoading">Loading...</div><div ng-hide="rcmHtmlEditorService.toolbarLoading"><div class="mce-fake" ng-show="(rcmHtmlEditorService.showFixedToolbar || !rcmHtmlEditorService.fixedToolbarToggle) && !rcmHtmlEditorService.isEditing"><div class="mce-tinymce mce-tinymce-inline mce-container mce-panel" role="presentation"><div class="mce-container-body mce-abs-layout"><div class="mce-toolbar-grp mce-container mce-panel mce-first mce-last"><div class="mce-container-body mce-stack-layout"><div class="mce-container mce-toolbar mce-first mce-last mce-stack-layout-item"><div class="mce-container-body mce-flow-layout"><div id="mcefake_33" class="mce-container mce-first mce-flow-layout-item mce-btn-group" role="group"><div id="mcefake_33-body"><div id="mcefake_0" class="mce-widget mce-btn mce-disabled mce-first mce-last" tabindex="-1" aria-labelledby="mcefake_0" role="button" aria-label="Source code"><button role="presentation" type="button" tabindex="-1"><i class="mce-ico mce-i-code"></i></button></div></div></div><div id="mcefake_34" class="mce-container mce-flow-layout-item mce-btn-group" role="group"><div id="mcefake_34-body"><div id="mcefake_1" class="mce-widget mce-btn mce-disabled mce-first" tabindex="-1" aria-labelledby="mcefake_1" role="button" aria-label="Undo" aria-disabled="true"><button role="presentation" type="button" tabindex="-1"><i class="mce-ico mce-i-undo"></i></button></div><div id="mcefake_2" class="mce-widget mce-btn mce-disabled mce-last" tabindex="-1" aria-labelledby="mcefake_2" role="button" aria-label="Redo" aria-disabled="true"><button role="presentation" type="button" tabindex="-1"><i class="mce-ico mce-i-redo"></i></button></div></div></div><div id="mcefake_35" class="mce-container mce-flow-layout-item mce-btn-group" role="group"><div id="mcefake_35-body"><div id="mcefake_3" class="mce-widget mce-btn mce-disabled mce-menubtn mce-first mce-last" tabindex="-1" aria-labelledby="mcefake_3" role="button" aria-haspopup="true"><button id="mcefake_3-open" role="presentation" type="button" tabindex="-1"><span>Formats</span> <i class="mce-caret"></i></button></div></div></div><div id="mcefake_36" class="mce-container mce-flow-layout-item mce-btn-group" role="group"><div id="mcefake_36-body"><div id="mcefake_4" class="mce-widget mce-btn mce-disabled mce-colorbutton mce-first mce-last" role="button" tabindex="-1" aria-haspopup="true" aria-label="Text color"><button role="presentation" hidefocus="1" type="button" tabindex="-1"><i class="mce-ico mce-i-forecolor"></i> <span id="mcefake_4-preview" class=mce-preview></span></button> <button type="button" class=mce-open hidefocus="1" tabindex="-1"><i class=mce-caret></i></button></div></div></div><div id="mcefake_37" class="mce-container mce-flow-layout-item mce-btn-group" role="group"><div id="mcefake_37-body"><div id="mcefake_5" class="mce-widget mce-btn mce-disabled mce-first" tabindex="-1" aria-labelledby="mcefake_5" role="button" aria-label="Bold" aria-pressed=true><button role="presentation" type="button" tabindex="-1"><i class="mce-ico mce-i-bold"></i></button></div><div id="mcefake_6" class="mce-widget mce-btn mce-disabled" tabindex="-1" aria-labelledby="mcefake_6" role="button" aria-label="Italic"><button role="presentation" type="button" tabindex="-1"><i class="mce-ico mce-i-italic"></i></button></div><div id="mcefake_7" class="mce-widget mce-btn mce-disabled" tabindex="-1" aria-labelledby="mcefake_7" role="button" aria-label="Underline"><button role="presentation" type="button" tabindex="-1"><i class="mce-ico mce-i-underline"></i></button></div><div id="mcefake_8" class="mce-widget mce-btn mce-disabled" tabindex="-1" aria-labelledby="mcefake_8" role="button" aria-label="Strikethrough"><button role="presentation" type="button" tabindex="-1"><i class="mce-ico mce-i-strikethrough"></i></button></div><div id="mcefake_9" class="mce-widget mce-btn mce-disabled" tabindex="-1" aria-labelledby="mcefake_9" role="button" aria-label="Subscript"><button role="presentation" type="button" tabindex="-1"><i class="mce-ico mce-i-subscript"></i></button></div><div id="mcefake_10" class="mce-widget mce-btn mce-disabled" tabindex="-1" aria-labelledby="mcefake_10" role="button" aria-label="Superscript"><button role="presentation" type="button" tabindex="-1"><i class="mce-ico mce-i-superscript"></i></button></div><div id="mcefake_11" class="mce-widget mce-btn mce-disabled mce-last" tabindex="-1" aria-labelledby="mcefake_11" role="button" aria-label="Clear formatting"><button role="presentation" type="button" tabindex="-1"><i class="mce-ico mce-i-removeformat"></i></button></div></div></div><div id="mcefake_38" class="mce-container mce-flow-layout-item mce-btn-group" role="group"><div id="mcefake_38-body"><div id="mcefake_12" class="mce-widget mce-btn mce-disabled mce-first" tabindex="-1" aria-labelledby="mcefake_12" role="button" aria-label="Align left"><button role="presentation" type="button" tabindex="-1"><i class="mce-ico mce-i-alignleft"></i></button></div><div id="mcefake_13" class="mce-widget mce-btn mce-disabled" tabindex="-1" aria-labelledby="mcefake_13" role="button" aria-label="Align center"><button role="presentation" type="button" tabindex="-1"><i class="mce-ico mce-i-aligncenter"></i></button></div><div id="mcefake_14" class="mce-widget mce-btn mce-disabled" tabindex="-1" aria-labelledby="mcefake_14" role="button" aria-label="Align right"><button role="presentation" type="button" tabindex="-1"><i class="mce-ico mce-i-alignright"></i></button></div><div id="mcefake_15" class="mce-widget mce-btn mce-disabled mce-last" tabindex="-1" aria-labelledby="mcefake_15" role="button" aria-label="Justify"><button role="presentation" type="button" tabindex="-1"><i class="mce-ico mce-i-alignjustify"></i></button></div></div></div><div id="mcefake_39" class="mce-container mce-flow-layout-item mce-btn-group" role="group"><div id="mcefake_39-body"><div id="mcefake_16" class="mce-widget mce-btn mce-disabled mce-first" tabindex="-1" aria-labelledby="mcefake_16" role="button" aria-label="Bullet list"><button role="presentation" type="button" tabindex="-1"><i class="mce-ico mce-i-bullist"></i></button></div><div id="mcefake_17" class="mce-widget mce-btn mce-disabled" tabindex="-1" aria-labelledby="mcefake_17" role="button" aria-label="Numbered list"><button role="presentation" type="button" tabindex="-1"><i class="mce-ico mce-i-numlist"></i></button></div><div id="mcefake_18" class="mce-widget mce-btn mce-disabled" tabindex="-1" aria-labelledby="mcefake_18" role="button" aria-label="Decrease indent"><button role="presentation" type="button" tabindex="-1"><i class="mce-ico mce-i-outdent"></i></button></div><div id="mcefake_19" class="mce-widget mce-btn mce-disabled mce-last" tabindex="-1" aria-labelledby="mcefake_19" role="button" aria-label="Increase indent"><button role="presentation" type="button" tabindex="-1"><i class="mce-ico mce-i-indent"></i></button></div></div></div><div id="mcefake_40" class="mce-container mce-flow-layout-item mce-btn-group" role="group"><div id="mcefake_40-body"><div id="mcefake_20" class="mce-widget mce-btn mce-disabled mce-first" tabindex="-1" aria-labelledby="mcefake_20" role="button" aria-label="Cut"><button role="presentation" type="button" tabindex="-1"><i class="mce-ico mce-i-cut"></i></button></div><div id="mcefake_21" class="mce-widget mce-btn mce-disabled" tabindex="-1" aria-labelledby="mcefake_21" role="button" aria-label="Copy"><button role="presentation" type="button" tabindex="-1"><i class="mce-ico mce-i-copy"></i></button></div><div id="mcefake_22" class="mce-widget mce-btn mce-disabled mce-last" tabindex="-1" aria-labelledby="mcefake_22" role="button" aria-pressed=false aria-label="Paste as text"><button role="presentation" type="button" tabindex="-1"><i class="mce-ico mce-i-pastetext"></i></button></div></div></div><div id=mcefake_41 class="mce-container mce-flow-layout-item mce-btn-group" role="group"><div id="mcefake_41-body"><div id="mcefake_23" class="mce-widget mce-btn mce-disabled mce-first" tabindex="-1" aria-labelledby="mcefake_23" role="button" aria-label="Insert/edit image"><button role="presentation" type="button" tabindex="-1"><i class="mce-ico mce-i-image"></i></button></div><div id="mcefake_24" class="mce-widget mce-btn mce-disabled mce-menubtn" tabindex="-1" aria-labelledby="mcefake_24" role="button" aria-label="Table" aria-haspopup="true"><button id="mcefake_24-open" role="presentation" type="button" tabindex="-1"><i class="mce-ico mce-i-table"></i> <span></span> <i class=mce-caret></i></button></div><div id="mcefake_25" class="mce-widget mce-btn mce-disabled" tabindex="-1" aria-labelledby="mcefake_25" role="button" aria-label="Horizontal line"><button role="presentation" type="button" tabindex="-1"><i class="mce-ico mce-i-hr"></i></button></div><div id="mcefake_26" class="mce-widget mce-btn mce-disabled mce-last" tabindex="-1" aria-labelledby="mcefake_26" role="button" aria-label="Special character"><button role="presentation" type="button" tabindex="-1"><i class="mce-ico mce-i-charmap"></i></button></div></div></div><div id="mcefake_42" class="mce-container mce-last mce-flow-layout-item mce-btn-group" role="group"><div id="mcefake_42-body"><div id="mcefake_27" class="mce-widget mce-btn mce-disabled mce-first" tabindex="-1" aria-labelledby="mcefake_27" role="button" aria-label="Insert/edit link"><button role="presentation" type="button" tabindex="-1"><i class="mce-ico mce-i-link"></i></button></div><div id="mcefake_28" class="mce-widget mce-btn mce-disabled" tabindex="-1" aria-labelledby="mcefake_28" role="button" aria-label="Remove link"><button role="presentation" type="button" tabindex="-1"><i class="mce-ico mce-i-unlink"></i></button></div><div id="mcefake_29" class="mce-widget mce-btn mce-disabled mce-last" tabindex="-1" aria-labelledby="mcefake_29" role="button" aria-label="Anchor"><button role="presentation" type="button" tabindex="-1"><i class="mce-ico mce-i-anchor"></i></button></div></div></div><div id="mcefake_42" class="mce-container mce-last mce-flow-layout-item mce-btn-group" role="group"><div id="mcefake_42-body"><div id="mcefake_27" class="mce-widget mce-btn mce-disabled mce-first mce-last" tabindex="-1" aria-labelledby="mcefake_27" role="button" aria-label="Insert/edit link"><button role="presentation" type="button" tabindex="-1"><i class="mce-ico mce-i-removeformat"></i></button></div></div></div></div></div></div></div></div></div></div><div id="externalToolbarWrapper"></div></div></div>',self.compile=function(tElm,tAttr){if(rcmHtmlEditorService.fixedToolbarToggle="true"==tAttr.htmlEditorToolbarToggle,!rcmHtmlEditorService.fixedToolbarToggle){var skin=tAttr.htmlEditorToolbarDefaultSkin?tAttr.htmlEditorToolbarDefaultSkin:"lightgray";rcmHtmlEditorService.fixedToolbarDefaultSkin=skin;var originalStyle=tElm.attr("style");void 0===originalStyle&&(originalStyle=""),tElm.attr("style","display: none;"),loadSkin(rcmHtmlEditorService.fixedToolbarDefaultSkin,function(){tElm.attr("style",originalStyle)},function(){tElm.attr("style",originalStyle)})}return function(scope,element,attrs,htmlEditorState){scope.rcmHtmlEditorService=rcmHtmlEditorService}},self.getDirective=function(){return{compile:self.compile,template:self.template}}};
//# sourceMappingURL=rcm-html-editor.min.js.map