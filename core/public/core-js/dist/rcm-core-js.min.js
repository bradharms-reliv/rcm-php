/*! rcm-core-js 2016-08-03 */

var RcmCore=function(){var self=this;self.moduleDepenencies=[],self.app=null,self.compile,self.scope,self.config={},self.getConfigValue=function(configKey,defaultValue){return self.config[configKey]?self.config[configKey]:defaultValue},self.addAngularModule=function(moduleName){if(!self.hasModule(moduleName))return self.app?void console.error("Module: "+moduleName+" registered too late."):void self.pushModuleName(moduleName)},self.addAngularModules=function(moduleConfigs){for(var moduleName in moduleConfigs)self.addAngularModule(moduleName,moduleConfigs[moduleName])},self.pushModuleName=function(moduleName){self.hasModule(moduleName)||self.moduleDepenencies.push(moduleName)},self.hasModule=function(moduleName){return self.moduleDepenencies.indexOf(moduleName)>-1},self.init=function(document){var angularModule=angular.module("rcm",self.moduleDepenencies);angular.element(document).ready(function(){angular.bootstrap(document,["rcm"]),self.app=angularModule,self.compile=angular.element(document).injector().get("$compile"),self.scope=angular.element(document).scope(),self.rootScope=angular.element(document).injector().get("$rootScope"),self.rootScope.safeApply=function(fn){var phase=self.rootScope.$$phase;"$apply"==phase||"$digest"==phase?fn&&"function"==typeof fn&&fn():self.rootScope.$apply(fn)},self.safeApply=function(scope,fn){var phase=scope.$root.$$phase;"$apply"==phase||"$digest"==phase?fn&&"function"==typeof fn&&fn():scope.$apply(fn)},self.angularSafeApply=function(fn){self.rootScope.safeApply(fn)},self.angularCompile=function(elm,fn){console.warn("rcm.angularCompile can cause problems for other angular directives!");var content=elm.contents();angular.element(document).injector().invoke(function($compile){var scope=angular.element(content).scope();$compile(content)(scope),self.safeApply(scope,fn)})}})},self.getPluginContainerSelector=function(instanceId){return'[data-rcmPluginInstanceId="'+instanceId+'"] .rcmPluginContainer'},self.getPluginContainer=function(instanceId){return $(self.getPluginContainerSelector(instanceId))},self.console=function(){var self=this;self.log=function(msg){},self.info=function(msg){},self.warn=function(msg){},self.error=function(msg){}},self.initConsole=function(){"undefined"!=typeof window.console&&(self.console=window.console),window.console=self.console},self.initConsole(),self.init(document)},rcm=new RcmCore;angular.module("rcmApi",[]).factory("rcmApiService",["$http","$log",function($http,$log){var self=this;return self.cache={},self.ApiParams=function(){this.url="",this.urlParams=null,this.data=null,this.params=null,this.prepareErrors=!1,this.loading=function(loading){},this.success=function(data){},this.error=function(data){}},self.ApiData=function(){this.code=null,this.message=null,this.data=[],this.errors=[]},self.get=function(apiParams,cache){if(apiParams=angular.extend(new self.ApiParams,apiParams),apiParams.url=self.formatUrl(apiParams.url,apiParams.urlParams),cache){if(self.cache[apiParams.url])return void self.apiSuccess(self.cache[apiParams.url],apiParams,"CACHE",null,null);apiParams.cacheId=apiParams.url}apiParams.loading(!0),$http({method:"GET",url:apiParams.url,params:apiParams.params}).success(function(data,status,headers,config){self.apiSuccess(data,apiParams,status,headers,config)}).error(function(data,status,headers,config){self.apiError(data,apiParams,status,headers,config)})},self.post=function(apiParams){apiParams=angular.extend(new self.ApiParams,apiParams),apiParams.url=self.formatUrl(apiParams.url,apiParams.urlParams),apiParams.loading(!0),$http({method:"POST",url:apiParams.url,data:apiParams.data}).success(function(data,status,headers,config){self.apiSuccess(data,apiParams,status,headers,config)}).error(function(data,status,headers,config){self.apiError(data,apiParams,status,headers,config)})},self.patch=function(apiParams){apiParams=angular.extend(new self.ApiParams,apiParams),apiParams.url=self.formatUrl(apiParams.url,apiParams.urlParams),apiParams.loading(!0),$http({method:"PATCH",url:apiParams.url,data:apiParams.data}).success(function(data,status,headers,config){self.apiSuccess(data,apiParams,status,headers,config)}).error(function(data,status,headers,config){self.apiError(data,apiParams,status,headers,config)})},self.put=function(apiParams){apiParams=angular.extend(new self.ApiParams,apiParams),apiParams.url=self.formatUrl(apiParams.url,apiParams.urlParams),apiParams.loading(!0),$http({method:"PUT",url:apiParams.url,data:apiParams.data}).success(function(data,status,headers,config){self.apiSuccess(data,apiParams,status,headers,config)}).error(function(data,status,headers,config){self.apiError(data,apiParams,status,headers,config)})},self.del=function(apiParams){apiParams=angular.extend(new self.ApiParams,apiParams),apiParams.url=self.formatUrl(apiParams.url,apiParams.urlParams),apiParams.loading(!0),$http({method:"DELETE",url:apiParams.url,data:apiParams.data}).success(function(data,status,headers,config){self.apiSuccess(data,apiParams,status,headers,config)}).error(function(data,status,headers,config){self.apiError(data,apiParams,status,headers,config)})},self.formatUrl=function(str,urlParams){if("object"!=typeof urlParams||null===urlParams)return str;for(var arg in urlParams)str=str.replace(RegExp("\\{"+arg+"\\}","gi"),urlParams[arg]);return str},self.apiError=function(data,apiParams,status,headers,config){$log.error("An API error occured, status: "+status+" returned: ",data),self.prepareErrorData(data,apiParams,function(data){apiParams.loading(!1),apiParams.error(data)},status)},self.apiSuccess=function(data,apiParams,status,headers,config){data.code>0||"object"!=typeof data?self.prepareErrorData(data,apiParams,function(data){apiParams.loading(!1),apiParams.error(data)},status):self.prepareData(data,apiParams,function(data){apiParams.cacheId&&(self.cache[apiParams.cacheId]=angular.copy(data)),apiParams.loading(!1),apiParams.success(data)})},self.prepareErrorData=function(data,apiParams,callback,status){return"object"==typeof data&&null!==data||(data=new self.ApiData),data.code||(data.code=status),data.message||(data.message="An unknown error occured while making request."),self.prepareData(data,apiParams,callback)},self.prepareData=function(data,apiParams,callback){return data.errors&&apiParams.prepareErrors?void self.prepareErrors(data,callback):void callback(data)},self.prepareErrors=function(data,callback){angular.forEach(data.errors,function(value,key){"object"==typeof value&&null!==value&&angular.forEach(value,function(evalue,ekey){data.errors[key]=evalue+" "})}),callback(data)},self}]);var rcmApi={rcmApiService:null};angular.injector(["ng","rcmApi"]).invoke(["rcmApiService",function(rcmApiService){rcmApi.rcmApiService=rcmApiService}]),function($){$.fn.alert=function(text,okCallBack,title){title||(title="Alert");var message=title;text&&(message='<div class="modal-body"><p>'+text+"</p></div>");var config={message:message,title:'<h1 class="modal-title">'+title+"</h1>",buttons:{ok:{label:"Ok",className:"btn-primary",callback:function(){}}}};"function"==typeof okCallBack&&(config.buttons.ok.callback=okCallBack),bootbox.dialog(config)},$.fn.confirm=function(text,okCallBack,cancelCallBack,title){title||(title="Confirm");var message=title;text&&(message='<div class="modal-body"><p>'+text+"</p></div>");var config={message:message,title:'<h1 class="modal-title">'+title+"</h1>",buttons:{cancel:{label:"Cancel",className:"btn-default",callback:function(){}},ok:{label:"Ok",className:"btn-primary",callback:function(){}}}};"function"==typeof cancelCallBack&&(config.buttons.cancel.callback=cancelCallBack),"function"==typeof okCallBack&&(config.buttons.ok.callback=okCallBack),bootbox.dialog(config)}}(jQuery),$().ready(function(){$("body").delegate("form","submit",function(){var form=$(this);return!form.attr("action")||!form.hasClass("processing")&&(form.addClass("processing"),!0)})}),RcmPopoutWindow=function(pagePath,height,width,title,windowName,data,successCallback,language){void 0!=windowName&&null!=windowName&&""!=windowName||(windowName="rcmAdminPagePopoutWindow"),language=language?"/"+language:"",$("body").find("#"+windowName).remove(),$("body").append('<div id="'+windowName+'"></div>');var popoutWidowDiv=$("#"+windowName);return $(popoutWidowDiv).load(pagePath+language,data,function(response,status,xhr){if("error"==status){var msg="Sorry but there was an error: ";$(popoutWidowDiv).html(msg+xhr.status+" "+xhr.statusText)}successCallback&&"function"==typeof successCallback&&successCallback.call(popoutWidowDiv)}),$(popoutWidowDiv).dialog({title:title,height:height,width:width,open:function(event,ui){$(".ui-dialog").css("z-index",3e3),$(".ui-widget-overlay").css("z-index",3e3)}}),popoutWidowDiv};
//# sourceMappingURL=rcm-core-js.min.js.map